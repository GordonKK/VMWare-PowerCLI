<html><head><title>Set-VsanClusterConfiguration - PowerCLI VMware.VimAutomation.Storage Help Reference</title><meta name="description" content=" Set-VsanClusterConfiguration" /><meta name="keywords" content="PowerCLI VMware.VimAutomation.Storage Help Reference, Set-VsanClusterConfiguration, Set, VsanClusterConfiguration" /><link href="doc-style.css" type="text/css" rel="StyleSheet"></head><body><h2 class="title"><a class="title" href='index.html' target="_top">PowerCLI Reference</a></h2><h1>Set-VsanClusterConfiguration</h1><h2>Synopsis</h2>This cmdlet sets Virtual SAN configuration settings for a cluster.<p class="table-title">Syntax</p>Set-VsanClusterConfiguration [-Configuration] &lt;VsanClusterConfiguration[]&gt; [-HealthCheckIntervalMinutes &lt;Int32&gt;] [-SpaceEfficiencyEnabled [&lt;Boolean&gt;]] [-PerformanceServiceEnabled [&lt;Boolean&gt;]] [-AllowReducedRedundancy [&lt;Boolean&gt;]] [-StoragePolicy &lt;SpbmStoragePolicy&gt;] [-StretchedClusterEnabled [&lt;Boolean&gt;]] [-PreferredFaultDomain &lt;VsanFaultDomain&gt;] [-WitnessHost &lt;VMHost&gt;] [-WitnessHostCacheDisk &lt;String&gt;] [-WitnessHostCapacityDisk &lt;String[]&gt;] [-Server &lt;VIServer[]&gt;] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]<p class="table-title">Related Commands</p><a href='http://www.vmware.com/support/developer/PowerCLI/PowerCLI65R1/html/Set-VsanClusterConfiguration.html'>Online version</a><br><a href='Get-VsanClusterConfiguration.html'>Get-VsanClusterConfiguration</a><br><p class="table-title">Detailed Description</p>This cmdlet sets Virtual SAN configuration settings for a cluster.<p class="table-title">Parameters</p><table cellspacing="0"><tr><th>Name</th><th>Type</th><th>Description</th><th>Required?</td><th>Pipeline Input</th><th>Default Value</th></tr><tr class="r1"><td><a id="Configuration" name="Configuration"></a><strong>Configuration</strong></td><td>VsanClusterConfiguration[]</td><td>Specifies the configurations to modify.
<br/>This parameter supports OBN based on the names of the associated cluster. This parameter also directly accepts objects of type Cluster by silently converting them to the configuration object through ArgumentTransformationAttribute.</td><td>true</td><td>true (ByValue)</td><tr class="r0"><td><a id="AllowReducedRedundancy" name="AllowReducedRedundancy"></a><strong>AllowReducedRedundancy</strong></td><td>Boolean</td><td>Allows reduced redundancy state.
<br/>This optional parameter is applicable to specific Virtual SAN cluster reconfigure operations that need to migrate data across cluster for changing Virtual SAN disk format. When specified, it might make the process move lesser data in order to ensure storage object accessibility, and some objects will be kept at reduced redundancy state, which means at a higher risk in case of a hardware failure during the migration process. This is applicable to the SpaceEfficiencyEnabled parameter only. The default value is False.</td><td>false</td><td>false</td><tr class="r1"><td><a id="Confirm" name="Confirm"></a><strong>Confirm</strong></td><td>SwitchParameter</td><td>If the value is $true, indicates that the cmdlet asks for confirmation before running. If the value is $false, the cmdlet runs without asking for user confirmation.</td><td>false</td><td>false</td><tr class="r0"><td><a id="HealthCheckIntervalMinutes" name="HealthCheckIntervalMinutes"></a><strong>HealthCheckIntervalMinutes</strong></td><td>Int32</td><td>Specifies the health check interval in minutes.
<br/>If the value of this parameter is non-zero, then health check is enabled on the cluster and health check frequency is set to the specified value. If the value of the parameter is zero, then health check is disabled on the cluster. The accepted values are from 15 minutes to one day (1440 minutes).</td><td>false</td><td>false</td><tr class="r1"><td><a id="PerformanceServiceEnabled" name="PerformanceServiceEnabled"></a><strong>PerformanceServiceEnabled</strong></td><td>Boolean</td><td>Enables or disables performance service on a Virtual SAN cluster.</td><td>false</td><td>false</td><tr class="r0"><td><a id="PreferredFaultDomain" name="PreferredFaultDomain"></a><strong>PreferredFaultDomain</strong></td><td>VsanFaultDomain</td><td>Specifies the preferred fault domain.
<br/>If stretched cluster configuration is enabled, this becomes the preferred fault domain for this cluster. The other fault domain in this stretched cluster becomes the secondary fault domain.</td><td>false</td><td>false</td><tr class="r1"><td><a id="Server" name="Server"></a><strong>Server</strong></td><td>VIServer[]</td><td>Specifies the vCenter Server systems on which you want to run the cmdlet. If no value is given to this parameter, the command runs on the default servers. For more information about default servers, see the description of Connect-VIServer.</td><td>false</td><td>false</td><tr class="r0"><td><a id="SpaceEfficiencyEnabled" name="SpaceEfficiencyEnabled"></a><strong>SpaceEfficiencyEnabled</strong></td><td>Boolean</td><td>Enables and disables deduplication and compression on a Virtual SAN cluster. Both deduplication and compression are enabled or disabled together.</td><td>false</td><td>false</td><tr class="r1"><td><a id="StoragePolicy" name="StoragePolicy"></a><strong>StoragePolicy</strong></td><td><a href="SpbmStoragePolicy.html">SpbmStoragePolicy</a></td><td>Specifies the storage policy.
<br/>This parameter is applicable in the context of enabling the VirtualSAN performance service. The Virtual SAN performance history database is stored as a Virtual SAN object. The policy controls the availability, space consumption and performance of that object. If the object becomes unavailable, the performance history for that cluster will also be unavailable.</td><td>false</td><td>false</td><tr class="r0"><td><a id="StretchedClusterEnabled" name="StretchedClusterEnabled"></a><strong>StretchedClusterEnabled</strong></td><td>Boolean</td><td>Enables or disables stretched cluster configuration.</td><td>false</td><td>false</td><tr class="r1"><td><a id="WhatIf" name="WhatIf"></a><strong>WhatIf</strong></td><td>SwitchParameter</td><td>Indicates that the cmdlet is run only to display the changes that would be made and actually no objects are modified.</td><td>false</td><td>false</td><tr class="r0"><td><a id="WitnessHost" name="WitnessHost"></a><strong>WitnessHost</strong></td><td>VMHost</td><td>Specifies the witness host virtual machine in case StretchedClusterEnabled is enabled. It can also be a vSphere virtual appliance called witness appliance.
<br/>Requirements for witness host:
<br/>1. Must not part of any Virtual SAN enabled cluster.
<br/>2. Must have at least one VMkernel adapter with Virtual SAN traffic enabled.
<br/>3. That adapter must be connected to all hosts in the stretched cluster.
<br/>If StretchedClusterEnabled is not specified or is false then this parameter is ignored.</td><td>false</td><td>false</td><tr class="r1"><td><a id="WitnessHostCacheDisk" name="WitnessHostCacheDisk"></a><strong>WitnessHostCacheDisk</strong></td><td>String</td><td>Specifies cache disk canonical name for the disk group to be created on the witness host. Also accepts ScsiLun or VMHostDisk objects through argument transformation.</td><td>false</td><td>false</td><tr class="r0"><td><a id="WitnessHostCapacityDisk" name="WitnessHostCapacityDisk"></a><strong>WitnessHostCapacityDisk</strong></td><td>String[]</td><td>Specifies the capacity disk canonical names for the disk group to be created on the witness host. Also accepts ScsiLun or VMHostDisk objects through argument transformation.</td><td>false</td><td>false</td></table><p class="table-title">Return Type</p>The list of modified Virtual SAN configuration objects for the cluster of type VsanClusterConfiguration
<p class="table-title">Notes</p><p class="table-title">Examples</p><div class="example"><p class="example-title">--------------  Example 1 --------------</p><pre class="programlisting">Set-VsanClusterConfiguration -Configuration (Get-VsanClusterConfiguration $cluster) -SpaceEfficiencyEnabled $true -HealthCheckIntervalMinutes 120</pre><p>Enables the space efficiency on the $cluster cluster and sets the periodic health check interval to 120 minutes.</p><p class="example-title">--------------  Example 2 --------------</p><pre class="programlisting">Set-VsanClusterConfiguration -Configuration &quot;MyCluster&quot; -StretchedClusterEnabled $true -PreferredFaultDomain $fd -WitnessHost $vmHost</pre><p>Enables stretched cluster on the &quot;MyCluster&quot; cluster and specifies $fd as the primary fault domain and $vmHost as the witness host.</p><p class="example-title">--------------  Example 3 --------------</p><pre class="programlisting">Set-VsanClusterConfiguration -Configuration &quot;MyCluster&quot; -PerformanceServiceEnabled $true -StoragePolicy $policy</pre><p>Enables performance service on the &quot;MyCluster&quot; cluster and associates the performance history database object with the $policy storage policy.</p><p class="example-title">--------------  Example 4 --------------</p><pre class="programlisting">Set-VsanClusterConfiguration -Configuration (Get-VsanClusterConfiguration $cluster) -HealthCheckIntervalMinutes 0</pre><p>Disables periodic health checks on the $cluster cluster.</p></div><hr>Copyright &copy; VMware, Inc.&nbsp;All rights reserved.</body></html>
